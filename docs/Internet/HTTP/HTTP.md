### HTTP

HTTP 协议（HyperText Transfer Protocol，超文本传输协议）是因特网上应用最广泛的一种网络传输协议，HTTP 是一个基于 TCP/IP 通信协议来传递数据（HTML 文件，图片文件，查询结果等）。

#### HTTP 简介

是用于从万维网服务器传输超文本到本地浏览器的传送协议。

#### HTTP 工作原理

HTTP 协议工作于客户端-服务端架构上。浏览器作为 HTTP 客户端通过 URL 向 HTTP 服务端即 WEB 服务器发送所有请求。

WEB 服务器根据收到的请求后，向客户端发送响应信息。

HTTP 默认端口号为 80，但是你也可以改为 8080 或者其他端口。

HTTP 三点注意事项（特性）

- HTTP 是无连接的：无连接的含义是限制每次连接只处理一个请求。服务器处理完客户的请求，并收到客户的应答后，即断开连接。采用这种方式可以节省传输时间。
- HTTP 是媒体独立的：这意味着，只要客户端和服务端知道如何处理的数据内容，任何类型的数据都可以通过 HTTP 发送，客户端以及服务器指定使用适合的 MIME-type 内容类型。
- HTTP 是无状态的：HTTP 协议是无状态协议。无状态协议是指协议对于事务处理没有记忆能力。缺少状态意味着如果后续处理需要前面的信息，则它必须重传，这样可能导致每次连接传送的数据量增大。另一方面，在服务器不需要先前信息时它的应答就较快。

![Snipaste_2021-05-19_16-50-21](http://img.monsterbear.top/img/HTTP%E5%8D%8F%E8%AE%AE%E9%80%9A%E4%BF%A1%E6%B5%81%E7%A8%8B.png)

CGI（Common Gateway Interface）是 HTTP 服务器与你的或其它机器上的程序进行“交谈”的一种工具，其程序必须运行在网络服务器上。

绝大多数的 CGI 程序被用来解释处理来自表单的输入信息，并在服务器产生相应的处理，或将相应的信息反馈给浏览器。CGI 程序使网页具有交互功能。

浏览器显示的内容都有 HTML、XML、GIF、Flash 等，浏览器是通过 MIME Type 区分它们，决定用什么内容什么形式来显示。

注释：MIME Type 是该资源的媒体类型，MIME Type 不是个人指定的，是经过互联网（IETF）组织协商，以 RFC（一系列以编号排定的文件，几乎所有的互联网标准都会收录在其中）的形式作为建议的标准发布在网上的，大多数的 Web 服务器和用户代理都会支持这个规范（Emial 附件的类型也是通过 MIME Type 指定的）。

媒体类型通常通过 HTTP 协议，由 Web 服务器告知浏览器的，更准确地说，是通过 Content-Type 来表示的。例如：`Content-type:text/HTML`。

通常只有一些卓越互联网上获得广泛应用的格式才会获得一个 MIME Type，如果是某个客户端自己定义的格式，一般只能以 application/x-开头。

#### HTTP 消息结构

HTTP 是基于客户端/服务端（C/S）的架构模型，通过一个可靠的链接来交换信息，是一个无状态的请求/响应协议。

一个 HTTP 客户端是一个应用程序（Web 浏览器或其他任何客户端），通过连接到服务器达到向多个服务器发送一个或多个 HTTP 的请求的目的。

一个 HTTP 服务器同样是一个应用程序（通常是一个 Web 服务），通过接收客户端的请求并向客户端发送 HTTP 响应数据。

HTTP 使用统一资源标识符（URI）来传输数据和建立连接。

一旦建立连接后，数据消息就通过类似 Internet 邮件所使用的格式和多用途 Internet 邮件扩展（MIME）来传送。

##### 客户端请求消息

客户端发送一个 HTTP 请求到服务器的请求消息包括以下格式：请求行、请求头、空行和请求数据四个部分组成。

请求方法 空格 URL 空格 协议版本 回车符 换行符 --请求行

头部字段名：值 回车符 换行符

。。。

头部字段名：值 回车符 换行符 ---请求头部

回车符 换行符

--- 请求数据

##### 服务器响应消息

HTTP 响应也有四部分组成，分别是：状态行、消息报头、空行和响应正文。

##### HTTP 请求方法

根据 HTTP 标准，HTTP 请求可以使用多种请求方法。

HTTP1.0 定义了三种请求方法：GET，POST 和 HEAD 方法。

HTTP1.1 新增了六种请求方法：OPTIONS、PUT、PATCH、DELETE、TRACE 和 CONNECT 方法。

HTTP 协议中共定义了 9 种方法来表明对给定资源执行的操作，指示针对给定资源要执行的期望动作。

- GET：请求一个指定资源的表示形式。使用 GET 的请求应该只被用于获取数据。

- HEAD：请求一个与 GET 请求的响应相同的响应，但没有响应体。用于获取报头。
- POST：用于将实体提交到指定的资源，通常导致在服务器上的状态变化或副作用。
- PUT：用于请求有效载荷替换目标资源的所有当前表示。
- DELETE：删除指定的资源。
- CONNECT：建立一个到有目标资源标识的服务器的隧道。
- OPTIONS：用于描述目标资源的通信选项。
- TRACE：沿着到目标资源的路径执行一个消息环回测试，主要用于测试或诊断。
- PATCH：是对 PUT 方法的补充，用于对资源应用部分修改。

虽然 HTTP 请求方式有 8 种，但是我们在实际应用中最常用的也就是 get 和 post，其他请求方式都可以通过这两种方式间接的来实现。

#### HTTP 响应头信息

#### HTTP 状态码

当浏览者访问一个网页时，浏览者的浏览器会向网页所在服务器发出请求。当浏览器接收并显示网页前，此网页所在的服务器会返回一个包含 HTTP 状态码的信息头用以响应浏览器的请求。

HTTP 状态码由三个十进制数字组成，第一个十进制数字定义了状态码的类型，后两个数字没有分类的作用。HTTP 状态码共分为 5 种类型。

- 1xx：信息，服务器收到请求，需要请求者继续执行操作。
- 2xx：成功，操作被成功接收并处理。
- 3xx：重定向，需要进一步的操作来完成请求。
- 4xx：客户端错误，请求包含语法错误或无法完成请求。
- 5xx：服务器错误，服务器在处理请求的过程中发生了错误。

-- more

#### HTTP Content-Type

Content-Type(内容类型)，一般是指网页中存在的 Content-Type，用于定义网络文件的类型和网页的编码，决定浏览器以什么形式、什么编码读取这个文件，这就是经常看到一些 PHP 网页点击的结果却是下载一个文件或一张图片的原因。

Content-Type 标头告诉客户端实际返回的内容的内容类型。

```
Content-Type:text/html;charset=utf-8
```

常见的媒体格式类型

以 application 开头的媒体格式类型

常见的媒体格式是上传文件之时使用的
